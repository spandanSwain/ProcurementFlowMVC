@model ProcurementFlow.Models.CatalogItems.CatalogViewModel;

@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Catalog Items";
}
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<h3 class="fw-bold mt-4 mb-3">Catalog Items</h3>
@if(Model.CatalogItems != null && Model.CatalogItems.Any()){
    <table class="table table-bordered table-striped table-sm align-middle text-center">
        <thead class="table-light">
            <tr>
                <th>@Html.DisplayNameFor(m => m.CatalogItems![0].ItemName)</th>
                <th>@Html.DisplayNameFor(m => m.CatalogItems![0].ItemDescription)</th>
                <th>@Html.DisplayNameFor(m => m.CatalogItems![0].LineTypeName)</th>
                <th>@Html.DisplayNameFor(m => m.CatalogItems![0].CategoryName)</th>
                <th>@Html.DisplayNameFor(m => m.CatalogItems![0].UOM)</th>
                <th>@Html.DisplayNameFor(m => m.CatalogItems![0].Price) (₹)</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.CatalogItems)
            {
                <tr>
                    <td>@item.ItemName</td>
                    <td>@item.ItemDescription</td>
                    <td>@item.LineTypeName</td>
                    <td>@item.CategoryName</td>
                    <td>@item.UOM</td>
                    <td>₹@item.Price</td>
                </tr>
            }
        </tbody>
    </table>
    <div class="mt-2 @(Model.CatalogItems.TotalPages > 1 ? "d-flex justify-content-between":"d-none")">
        @*TotalPages > PageSize then show navigation*@
        @{
            var prevDisabled = !Model.CatalogItems.HasPreviousPage ? "disabled" : "";
            var nextDisabled = !Model.CatalogItems.HasNextPage ? "disabled" : "";
        }
        <a asp-action="CatalogItems"
           asp-route-page="@(Model.CatalogItems.PageIndex - 1)"
           class="btn btn-outline-dark @prevDisabled">Previous</a>

        <span>Page @Model.CatalogItems.PageIndex of @Model.CatalogItems.TotalPages</span>

        <a asp-action="CatalogItems"
           asp-route-page="@(Model.CatalogItems.PageIndex + 1)"
           class="btn btn-outline-dark @nextDisabled">Next</a>
    </div>
}
else{
    <p class="text-muted">No results found</p>
}

<div class="mt-3">
    <a asp-action="Index" asp-controller="@Context.Session.GetString("Redirect")" class="btn btn-secondary">
        <i class="bi bi-arrow-left-circle me-1"></i> Back
    </a>
</div>
